parallerExpression:
    sequenceExpression:
        sequenceExpression:
            noteExpression:
                pitch: E
                octave:
                    IntLiteral: 4
                duration: w
            noteExpression:
                pitch: G
                octave:
                    IntLiteral: 4
                duration: w
        noteExpression:
            pitch: D
            octave:
                IntLiteral: 4
            duration: w
    sequenceExpression:
        sequenceExpression:
            noteExpression:
                pitch: C
                octave:
                    IntLiteral: 4
                duration: w
            noteExpression:
                pitch: D
                octave:
                    IntLiteral: 4
                duration: w
        noteExpression:
            pitch: F
            octave:
                IntLiteral: 4
            duration: w
pipeExpression:
    inlineFuncCall: harm
    modifierExpression:
        modifier:
            name: dur
            value:
                noteExpression:
                    duration: w
            name: oct
            value:
                IntLiteral: 4
        arrayExpression:
            pipeExpression:
                inlineFuncCall: mel
                arrayExpression:
                    noteExpression:
                        pitch: E
                    noteExpression:
                        pitch: G
                    noteExpression:
                        pitch: D
            pipeExpression:
                inlineFuncCall: mel
                arrayExpression:
                    noteExpression:
                        pitch: C
                    noteExpression:
                        pitch: D
                    noteExpression:
                        pitch: F
declaration:
    type: inference
    name: a
    pipeExpression:
        inlineFuncCall: mel
        modifierExpression:
            modifier:
                name: oct
                value:
                    IntLiteral: 4
            arrayExpression:
                noteExpression:
                    pitch: E
                noteExpression:
                    pitch: G
                noteExpression:
                    pitch: D
declaration:
    type: inference
    name: b
    pipeExpression:
        inlineFuncCall: track
            arguments:
                variableReference: Guitar
        pipeExpression:
            inlineFuncCall: harm
            pipeExpression:
                inlineFuncCall: concat
                    arguments:
                        variableReference: a
                pipeExpression:
                    inlineFuncCall: transpose
                        arguments:
                            minusUnaryExpression:
                                IntLiteral: 1
                    pipeExpression:
                        inlineFuncCall: repeat
                            arguments:
                                castExpression:
                                    type: Int
                                    floatLiteral: 2,000000
                        variableReference: a
declaration:
    type: inference
    name: c
    pipeExpression:
        inlineFuncCall: head
            arguments:
                plusUnaryExpression:
                    IntLiteral: 100
        pipeExpression:
            inlineFuncCall: open
                arguments:
                    variableReference: Track
                    IntLiteral: 0
            stringLiter: song.mid
declaration:
    LambdaType:
        returnType:
            type: Int
        parameters:
            type: Int
            type: Int
    name: NWD
assigment:
    variable: NWD
    lambda:
        parameters:
            name: a
            type: Int
            name: b
            type: Int
        returns:
            type: Int
        block:
            ifStatement
                condition:
                    NotEqExpression:
                        variableReference: b
                        IntLiteral: 0
                block:
                    ReturnStatement:
                        FunctionCall:
                            name: NWD
                            arguments:
                                variableReference: b
                                ModuloExpression:
                                    variableReference: a
                                    variableReference: b
            ReturnStatement:
                variableReference: a
FunctionCall:
    name: a
    arguments:
        IntLiteral: 1
        lambda:
            parameters:
            returns:
                type: Int
            block:
                FunctionCall:
                    name: b
                    arguments:
                        IntLiteral: 1
                FunctionCall:
                    name: c
                    arguments:
                        IntLiteral: 2
declaration:
    type: inference
    name: randGen
    lambda:
        parameters:
            name: scale
            type: Scale
            name: rythm
            type: Rythm
        returns:
            type: Phrase
        block:
            ifStatement
                condition:
                    OrExpression:
                        pipeExpression:
                            inlineFuncCall: isEmpty
                            variableReference: scale
                        pipeExpression:
                            inlineFuncCall: isEmpty
                            variableReference: rythm
                block:
                    pipeExpression:
                        inlineFuncCall: panic
                        stringLiter: Provided scale or rythm is empty
            declaration:
                type: inference
                name: seed
                AddExpression:
                    ModuloExpression:
                        MulExpression:
                            pipeExpression:
                                inlineFuncCall: len
                                variableReference: scale
                            pipeExpression:
                                inlineFuncCall: len
                                variableReference: rythm
                        IntLiteral: 3
                    IntLiteral: 1
            declaration:
                type: inference
                name: maxLen
                pipeExpression:
                    inlineFuncCall: max
                    arrayExpression:
                        pipeExpression:
                            inlineFuncCall: len
                            variableReference: scale
                        pipeExpression:
                            inlineFuncCall: len
                            variableReference: rythm
            declaration:
                type: inference
                name: lowestNote
                pipeExpression:
                    inlineFuncCall: argmin
                    variableReference: scale
            declaration:
                type: Template
                name: form
            ForStatement:
                declaration:
                    type: Int
                    name: i
                RangeExpression:
                    IntLiteral: 1
                    variableReference: seed
                block:
                    declaration:
                        type: inference
                        name: line
                        pipeExpression:
                            inlineFuncCall: mel
                            ListComprehension:
                                variableReference: dumb_temp
                                mapper:
                                    ModuloExpression:
                                        FunctionCall:
                                            name: rand
                                            arguments:
                                        variableReference: maxLen
                                RangeExpression:
                                    IntLiteral: 1
                                    MulExpression:
                                        AddExpression:
                                            ModuloExpression:
                                                FunctionCall:
                                                    name: rand
                                                    arguments:
                                                IntLiteral: 4
                                            IntLiteral: 1
                                        variableReference: maxLen
                    ParalerAssignStatement:
                        variable: form
                        variableReference: line
            ReturnStatement:
                MulExpression:
                    ConvolutionExpression:
                        variableReference: form
                        variableReference: scale
                    ConvolutionExpression:
                        variableReference: form
                        variableReference: rythm
pipeExpression:
    inlineFuncCall: export
        arguments:
            stringLiter: demo2.mid
    pipeExpression:
        inlineFuncCall: song
            arguments:
                IntLiteral: 120
                IntLiteral: 60
        arrayExpression:
            pipeExpression:
                inlineFuncCall: track
                    arguments:
                        variableReference: Piano
                variableReference: a
            variableReference: b
            LambdaCall:
                FunctionCall:
                    name: markov
                    arguments:
                        arrayExpression:
                            stringLiter: song1.mid
                            stringLiter: song2.mid
                        IntLiteral: 1
                arguments:
                    noteExpression:
                        pitch: C
                        octave:
                            IntLiteral: 4
                        duration: q
            pipeExpression:
                inlineFuncCall: track
                    arguments:
                        variableReference: BagPipe
                pipeExpression:
                    inlineFuncCall: randGen
                        arguments:
                            arrayExpression:
                                noteExpression:
                                    duration: q
                                noteExpression:
                                    duration: w
                                noteExpression:
                                    duration: h
                    arrayExpression:
                        noteExpression:
                            pitch: C
                        noteExpression:
                            pitch: E
                        noteExpression:
                            pitch: G
declaration:
    type: inference
    name: x2
    AddExpression:
        pipeExpression:
            inlineFuncCall: len
            pipeExpression:
                inlineFuncCall: dot
                    arguments:
                        AddExpression:
                            MinusExpression:
                                AddExpression:
                                    IntLiteral: 1
                                    MulExpression:
                                        IntLiteral: 3
                                        PowExpression:
                                            IntLiteral: 4
                                            IntLiteral: 7
                                IntLiteral: 1
                            MulExpression:
                                DivExpression:
                                    IntLiteral: 3
                                    IntLiteral: 6
                                IntLiteral: 12
                pipeExpression:
                    inlineFuncCall: concat
                        arguments:
                            arrayExpression:
                                IntLiteral: 3
                                IntLiteral: 4
                    arrayExpression:
                        IntLiteral: 0
                        IntLiteral: 1
                        IntLiteral: 2
        IntLiteral: 2